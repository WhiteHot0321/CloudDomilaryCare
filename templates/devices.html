<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

    <!-- Basic Page Needs
  ================================================== -->
	<meta charset="utf-8">
	<title>居家雲端照護</title>
	<meta name="description" content="Free Responsive Html5 Css3 Templates | zerotheme.com">
	<meta name="author" content="www.zerotheme.com">
	
    <!-- Mobile Specific Metas
  ================================================== -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <!-- CSS
  ================================================== -->
  <link rel="stylesheet" href="/www/css/zerogrid.css">
  <link rel="stylesheet" href="/www/css/style.css">
  <link rel="stylesheet" href="/www/css/responsive.css">
	
	<!--[if lt IE 8]>
       <div style=' clear: both; text-align:center; position: relative;'>
         <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
           <img src="http://storage.ie6countdown.com/assets/100www/images/banners/warning_bar_0000_us.jpg" border="0" height="42" width="820" alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today." />
        </a>
      </div>
    <![endif]-->
    <!--[if lt IE 9]>
		<script src="js/html5.js"></script>
		<script src="js/css3-mediaqueries.js"></script>
	<![endif]-->
	
</head>
<body id="single">
	<div class="wrap-body"></div>
<!-- 
	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/foundation.min.css">
	<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/responsive.css">
	<link rel="stylesheet" href="css/zerogrid.css">
	<link rel="stylesheet" href="css/industrial.css">
	<link rel="stylesheet" href="css/introjs.min.css">
	<link rel="stylesheet" href="css/foundation.css"> -->
	
  <script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
  <script src="https://canvasjs.com/assets/script/jquery.canvasjs.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.4/socket.io.js"></script>
<!--////////////////////////////////////Header-->
<header>
	<div class="top-bar">
		<div class="wrap-top zerogrid">
			<div class="row">
				<div class="col-1-2">
					<div class="wrap-col">
						<ul>
							<li class="mail"><p>u10606256@ms.ttu.edu.tw</p></li>
							<li class="phone"><p>(02)2316-7736</p></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="wrap-header">
		<div class="zerogrid">
			<div class="row">
				<div class="col-1-3">
					<div class="wrap-col">
						<div class="logo"><a href="#"><img src="/www/images/logo.png"/></a></div>	
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="wrap-banner">
		<div id="menu">
			<nav>
				<div class="wrap-nav">
					<ul>
						<li><a href="http://127.0.0.1:5000/">Home</a></li>
						<li><a href="AboutUs.html">About Us</a></li>
						<li><a href="Account.html">Account</a></li>
						<li class="active"><a href="devices.html">Devices</a></li>
						<li><a href="Forum.html">Forum</a></li>
					</ul>
			   </div>
			</nav>
		</div>
		  	<div class="zerogrid">
				<div class="col-2-3">
					<div class="wrap-col">
						<div class="top-title"><font color='1B335D'>
							<form id="payment-form" action="/payment" method="get">
								<h1>Devices</h1>
							</form></font>
						</div>
					</div>
				</div>
			</div> 


    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.4/socket.io.js"></script>
    <script>
        var socket = io.connect('http://' + document.domain + ':' + location.port);
		var TempisConnected = false;
		var HumidisConnected = false;

    socket.on('mqtt_message', function(data) {
    // 構建消息字符串
    var messageString;

    // 使用 switch case 根據不同的主題進行處理
    switch (data.topic) {
        case "MQTT/reset/LC2":
			TempisConnected = true;
			messageString = '<strong>' + '&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;室內溫度' + '</strong>: ' + data.payload+ '°C';
            break;
        case "MQTT/reset/LC3":
			HumidisConnected = true;
			messageString = '<strong>' + '&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;室內濕度:' + '</strong> ' + data.payload+ 'PH';
            break;
        case "MQTT/reset/LC4":
			if(data.payload == 1)
				messageString = '<strong>' + '&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;偵測到重量' + '</strong>';
			else
				messageString = '<strong>' + '&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;未偵測到重量' + '</strong>: ';
			break;
        case "MQTT/reset/LC5":
			messageString = '<strong>' + '&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;熱指數' + '</strong>: ' + data.payload;
            break;
        case "MQTT/reset/LC6":
			messageString = '<strong>' + '&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;水量' + '</strong>: ' + data.payload+ 'cc';
            break;
        case "MQTT/reset/LC7":
            messageString = '<strong>' + '&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;室外溫度' + '</strong>: ' + data.payload+ '°C';
            break;
        case "MQTT/reset/LC8":
            messageString = '<strong>' + '&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;室外濕度' + '</strong>: ' + data.payload+ 'PH';
            break;
        default:
            messageString = '<strong>' + '&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;未知主題' + '</strong>: ' + data.payload;
            break;
    }
	var existingItem = document.getElementById('LC_' + data.topic.split('/').pop());
    if (existingItem) {
        existingItem.innerHTML = messageString;
    } else {
        // 創建新的 <li> 元素
        var listItem = document.createElement('li');
        listItem.id = 'LC_' + data.topic.split('/').pop();
        listItem.innerHTML = messageString;

        // 將新元素添加到 <ul> 中
        document.getElementById('mqttData').appendChild(listItem);
    }
});

	function checkTemperatureConnection() {
        if (TempisConnected) {
            document.getElementById('Tempconnection-status').innerHTML = '&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Temperature Sensor Connected';
        } else {
            document.getElementById('Tempconnection-status').innerHTML = '&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Temperature Sensor disconnected';
        }
    }
	
	function checkHumidityConnection() {
        if (HumidisConnected) {
            document.getElementById('Humconnection-status').innerHTML = '&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Humidity Sensor Connected';
        } else {
            document.getElementById('Humconnection-status').innerHTML = '&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Humidity Sensor disconnected';
        }
    }

	setInterval(checkTemperatureConnection, 2000);
	setInterval(checkHumidityConnection, 2000);
	</script>
		<strong id="mqttData"></strong>
		<br><br><br>
		<strong id="Tempconnection-status">&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Temperature disconnected</strong>
		<br><br>
		<strong id="Humconnection-status">&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Humidity disconnected</strong>
	</div>
	</ul>
</header>
<body>


</body>  

<!--////////////////////////////////////Container-->


<!--////////////////////////////////////Footer-->
<footer>
	<div class="zerogrid">
		<div class="wrap-footer">
			<div class="row">
				<div class="col-1-4">
					<div class="wrap-col">
						<div class="widget wid-about">
							<div class="wid-header">
								<h5>Welcome</h5>
							</div>
							<div class="logo"><a href="#"><img src="www/images/logo.png"/></a></div>
							<p>這個居家照護系統可以提供家庭成員對被照護者的更多關心和支持，同時提供實時信息，以確保被照護者的福祉。該專題結合了硬體設計、感測技術和程式開發，為居家照護領域帶來了有價值的創新。 </p>
						</div>
					</div>
				</div>
				<div class="col-1-4">
					<div class="wrap-col">
						<div class="widget wid-meta">
							<div class="wid-header">
								<h5>Links List</h5>
							</div>
							<div class="widget-content">
								<div class="row">
									<ul>
										<li><a href="https://reurl.cc/r64kvN">> 衛服部居家照護 </a></li>
										<li><a href="https://reurl.cc/ka3kdr">> 長照2.0懶人包</a></li>
										<li><a href="https://reurl.cc/K3LEdp">> 台北市衛服部長照2.0服務區</a></li>
										<li><a href="https://www.clc.org.tw/index.php">> 社團法人中華長照協會  </a></li>
										<li><a href="https://reurl.cc/NyLOOQ">> 快速尋找附近的長照服務</a></li>
										<li><a href="https://reurl.cc/l74nYd">> 各縣市長期照顧管理中心聯繫窗口</a></li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="bottom-footer">
		<div class="wrap-bottom ">
			<div class="copyright">
				<p>pierce@2023 - Designed by <a href="https://www.zerotheme.com">Pierce</a></p>
			</div>
		</div>
	</div>
</footer>


</div>
</body></html>